<% layout("layouts/boilerplate") %>
<link rel="stylesheet" href="/css/user.css">

<div class="container cont-form col-md-6 col-11 my-5">
  <h2 class="text-center">Edit Your Profile</h2>
  <form action="/profile/<%= currUser._id %>/edit" method="POST" novalidate class="needs-validation">

    <!-- Phone -->
    <div class="mb-3">
      <label for="phone" class="form-label">Phone</label>
      <input type="text" name="phone" id="phone" class="form-control" value="<%= currUser.phone %>" required>
    </div>

    <!-- Address Fields -->
    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="street" class="form-label">Street</label>
        <input type="text" name="address[street]" id="street" class="form-control" value="<%= currUser.address?.street || '' %>">
      </div>
      <div class="col-md-6 mb-3">
        <label for="city" class="form-label">City</label>
        <input type="text" name="address[city]" id="city" class="form-control" value="<%= currUser.address?.city || '' %>">
      </div>
      <div class="col-md-6 mb-3">
        <label for="state" class="form-label">State</label>
        <input type="text" name="address[state]" id="state" class="form-control" value="<%= currUser.address?.state || '' %>">
      </div>
      <div class="col-md-6 mb-3">
        <label for="pincode" class="form-label">Pincode</label>
        <input type="text" name="address[pincode]" id="pincode" class="form-control" value="<%= currUser.address?.pincode || '' %>">
      </div>
    </div>

    <!-- User Type -->
    <div class="mb-4">
      <label for="userType" class="form-label">User Type</label>
      <select name="userType" id="userType" class="form-select" required>
        <option value="vendor" <%= currUser.userType === 'vendor' ? 'selected' : '' %>>Vendor</option>
        <option value="supplier" <%= currUser.userType === 'supplier' ? 'selected' : '' %>>Supplier</option>
      </select>
    </div>

    <div class="text-center">
      <button type="submit" class="btn btn-primary px-4 py-2">Update Profile</button>
    </div>
  </form>
</div>

<style>
  .cont-form {
    background-color: #ffffff;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    border-radius: 20px;
    padding: 30px;
    transition: 0.3s ease;
  }

  .cont-form:hover {
    box-shadow: 0 6px 24px rgba(0, 0, 0, 0.12);
  }

  h2 {
    font-weight: 700;
    margin-bottom: 30px;
    color: #333;
  }

  label.form-label {
    font-weight: 600;
    color: #555;
  }

  .form-control, .form-select {
    border-radius: 10px;
    padding: 10px 12px;
    font-size: 1rem;
  }

  .form-control:focus, .form-select:focus {
    border-color: #007bff;
    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.2);
  }

  .btn-primary {
    background-color: #333;
    border-radius: 12px;
    font-weight: 600;
    font-size: 1rem;
    transition: background-color 0.3s ease;
  }

  .btn-primary:hover {
    background-color: #0056b3;
    border-color: #0056b3;
  }

  @media (max-width: 768px) {
    .cont-form {
      padding: 20px;
    }
  }
</style>
