<% layout("layouts/boilerplate") %>

<div class="dashboard-container">
  <h1 class="mb-3">Welcome, <%= currUser?.username || "User" %>!</h1>
  
  <div class="user-info-card">
    <h2>Your Profile</h2>
    <hr>
    <ul>
      
      <li><strong>Phone:</strong> <%= currUser?.phone || "N/A" %></li>
      <li><strong>User Type:</strong> <%= currUser?.userType || "N/A" %></li>
      <li><strong>Address:</strong>
        <%= currUser?.address?.street || "" %>,
        <%= currUser?.address?.city || "" %>,
        <%= currUser?.address?.state || "" %>,
        <%= currUser?.address?.pincode || "" %>
      </li>
      <li><strong>Registered On:</strong> 
        <%= currUser?.createdAt ? currUser.createdAt.toDateString() : "N/A" %>
      </li>
    </ul>
    <form action="/profile/edit/<%= currUser._id %>" method="get">
      <button type="submit" class="btn btn-danger col-1">Edit</button>
    </form>
  </div>

  <div class="dashboard-actions">
    <% if (currUser.userType === 'supplier') { %>
      <a href="/supplier/add-product" class="btn col-2 mb-2">Add New Product</a>
      <a href="/supplier/manage-products/<%= currUser._id %>" class="btn col-2 mb-2">Manage Products</a>
      <a href="/supplier/orders" class="btn col-2 mb-2">View Requests</a>
    <% } %>

    <% if (currUser.userType === 'vendor') { %>
      <a href="/vendor/orders" class="btn col-2 mb-2">Order History</a>
    <% } %>
  </div>

</div>
