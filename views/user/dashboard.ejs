<% layout("layouts/boilerplate") %>


<div class="container mt-5 mb-5">
  <h1 class="welcome-heading mb-4">
  ðŸ‘‹ Welcome, <span><%= currUser?.username || "User" %></span>!
  </h1>


  <% if (currUser) { %>
    <!-- Profile Info Card -->
    <div class="card shadow-sm mb-4">
      <div class="card-header bg-primary text-white">
        <h5 class="mb-0">Your Profile</h5>
      </div>
      <div class="card-body">
        <ul class="list-group list-group-flush">
          <li class="list-group-item"><strong>Phone:</strong> <%= currUser.phone || "N/A" %></li>
          <li class="list-group-item"><strong>User Type:</strong> <%= currUser.userType || "N/A" %></li>
          <li class="list-group-item"><strong>Address:</strong> 
            <%= currUser.address?.street || "" %>,
            <%= currUser.address?.city || "" %>,
            <%= currUser.address?.state || "" %>,
            <%= currUser.address?.pincode || "" %>
          </li>
          <li class="list-group-item"><strong>Registered On:</strong> 
            <%= currUser.createdAt ? currUser.createdAt.toDateString() : "N/A" %>
          </li>
        </ul>
        <div class="text-end mt-3">
          <a href="/profile/edit/<%= currUser._id %>" class="btn btn-outline-danger btn-sm">Edit Profile</a>
        </div>
      </div>
    </div>

    <!-- Actions -->
    <div class="row g-3">
      <% if (currUser.userType === 'supplier') { %>
        <div class="col-md-4">
          <a href="/supplier/add-product" class="btn btn-success w-100">Add New Product</a>
        </div>
        <div class="col-md-4">
          <a href="/supplier/manage-products/<%= currUser._id %>" class="btn btn-primary w-100">Manage Products</a>
        </div>
        <div class="col-md-4">
          <a href="/supplier/orders" class="btn btn-dark w-100">View Requests</a>
        </div>
      <% } %>

      <% if (currUser.userType === 'vendor') { %>
        <div class="col-md-6 offset-md-3">
          <a href="/vendor/orders" class="btn btn-info w-100">Order History</a>
        </div>
      <% } %>
    </div>

  <% } else { %>
    <div class="alert alert-warning mt-4 text-center">
      Please <a href="/login">log in</a> to view your dashboard.
    </div>
  <% } %>
</div>




