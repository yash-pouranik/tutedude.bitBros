<% layout("layouts/boilerplate") %>

<div class="container mt-5 mb-5">
  <div class="card shadow-lg rounded-4 border-0">
    <div class="card-body p-5">
      <h2 class="card-title text-center mb-4">Edit Product</h2>

      <form action="/product/<%= product._id %>?_method=PUT" method="POST">
        <div class="mb-4">
          <label for="name" class="form-label fw-semibold">Product Name</label>
          <input
            type="text"
            id="name"
            name="product[name]"
            class="form-control form-control-lg"
            value="<%= product.name %>"
            required
          />
        </div>

        <div class="mb-4">
          <label for="price" class="form-label fw-semibold">Price</label>
          <input
            type="number"
            id="price"
            name="product[price]"
            class="form-control form-control-lg"
            value="<%= product.price %>"
            step="0.01"
            required
          />
        </div>

        <div class="mb-4">
          <label for="description" class="form-label fw-semibold">Description</label>
          <textarea
            id="description"
            name="product[description]"
            class="form-control form-control-lg"
            rows="4"
            required
          ><%= product.description %></textarea>
        </div>

       <div class="mb-4">
       <label for="availability" class="form-label fw-semibold">Available</label>
       <!-- Hidden input to ensure a value is always sent -->
       <input type="hidden" name="product[availability]" value="false" />
       <input
        type="checkbox"
        id="availability"
        name="product[availability]"
        value="true"
        <%= product.availability ? 'checked' : '' %>
       />
       <label for="availability">In Stock</label>
       </div>

        <div class="mb-3">
          <label for="category" class="form-label">Category</label>
          <select id="category" name="product[category]" class="form-select" required>
            <option value="Fresh" <%= product.category === 'Fresh' ? 'selected' : '' %>>Fresh</option>
            <option value="Packed" <%= product.category === 'Packed' ? 'selected' : '' %>>Packed</option>
          </select>
        </div>

        <!-- Add more fields as needed -->

        <div class="d-flex justify-content-center gap-3 mt-4">
          <button type="submit" class="btn btn-success px-4 py-2">Update Product</button>
          <a href="/product/<%= product._id %>" class="btn btn-outline-secondary px-4 py-2">Cancel</a>
        </div>
      </form>
    </div>
  </div>
</div>
